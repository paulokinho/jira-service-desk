<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
    </plugin-info>

    <resource type="i18n" name="i18n" location="com.bics.jira.mail.messages"/>

    <message-handler i18n-name-key="smart.handler.name" key="smartHandler"
                     class="com.bics.jira.mail.SmartMailHandler"
                     add-edit-url="/secure/admin/EditSmartHandlerDetails!default.jspa"
                     weight="0"/>

    <web-resource i18n-name-key="smart.wizard.name" key="edit-handler-details-page">
        <context>admin.mail.incoming</context>

        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>

        <transformation extension="soy">
            <transformer key="soyTransformer"/>
        </transformation>

        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>jira.webresources:jira-global</dependency>
        <dependency>jira.webresources:autocomplete</dependency>
        <dependency>com.atlassian.jira.jira-mail-plugin:global-resources</dependency>

        <!--
                <resource type="download" name="edit-handler-details.js" location="javascript/edit-handler-details.js"/>
                <resource type="download" name="edit-handler-details-test-dialog.js" location="javascript/edit-handler-details-test-dialog.soy"/>
                <resource type="download" name="edit-handler-details.css" location="css/edit-handler-details.css"/>
        -->
    </web-resource>

    <webwork1 key="actions" name="Actions" class="java.lang.Object">
        <actions>
            <action name="com.bics.jira.mail.web.EditSmartMailHandlerDetailsWebAction"
                    alias="EditSmartHandlerDetails"
                    roles-required="admin">
                <view name="input">/secure/admin/views/editSmartHandlerDetails.vm</view>
                <view name="securitybreach">/secure/views/securitybreach.jsp</view>
            </action>
        </actions>
    </webwork1>
</atlassian-plugin>