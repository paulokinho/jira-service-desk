<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
    </plugin-info>

    <resource type="i18n" name="i18n" location="com.bics.jira.mail.messages"/>

    <component key="model-validator" i18n-name-key="msd.validator.name" class="com.bics.jira.mail.handler.ModelValidatorImpl">
        <interface>com.bics.jira.mail.ModelValidator</interface>
    </component>

    <component key="user-helper" i18n-name-key="msd.helper.user.name" class="com.bics.jira.mail.helper.UserHelperImpl">
        <interface>com.bics.jira.mail.UserHelper</interface>
    </component>

    <component key="issue-builder" i18n-name-key="msd.issue.builder.name" class="com.bics.jira.mail.helper.IssueHelperImpl">
        <interface>com.bics.jira.mail.IssueHelper</interface>
    </component>

    <component key="issue-locator" i18n-name-key="msd.issue.locator.name" class="com.bics.jira.mail.helper.IssueLocatorImpl">
        <interface>com.bics.jira.mail.IssueLocator</interface>
    </component>

    <component key="comment-extractor" i18n-name-key="msd.comment.extractor.name" class="com.bics.jira.mail.helper.MailHelperImpl">
        <interface>com.bics.jira.mail.MailHelper</interface>
    </component>

    <message-handler key="message-handler" i18n-name-key="msd.handler.name" class="com.bics.jira.mail.handler.ServiceDeskMessageHandler"
                     add-edit-url="/secure/admin/ServiceDeskMailDetails!default.jspa"
                     weight="0"/>

    <web-resource i18n-name-key="msd.webwork.name" key="edit-handler-details-page">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>

        <transformation extension="soy">
            <transformer key="soyTransformer"/>
        </transformation>

        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>jira.webresources:jira-global</dependency>
        <dependency>jira.webresources:autocomplete</dependency>
        <dependency>com.atlassian.jira.jira-mail-plugin:global-resources</dependency>

        <!--
                <resource type="download" name="edit-handler-details.js" location="javascript/edit-handler-details.js"/>
                <resource type="download" name="edit-handler-details-test-dialog.js" location="javascript/edit-handler-details-test-dialog.soy"/>
                <resource type="download" name="edit-handler-details.css" location="css/edit-handler-details.css"/>
        -->
    </web-resource>

    <webwork1 key="actions" name="Actions" class="java.lang.Object">
        <actions>
            <action name="com.bics.jira.mail.web.ServiceDeskMailHandlerDetailsWebAction"
                    alias="ServiceDeskMailDetails"
                    roles-required="admin">
                <view name="input">/secure/admin/views/serviceDeskDetails.vm</view>
                <view name="securitybreach">/secure/views/securitybreach.jsp</view>
            </action>
        </actions>
    </webwork1>
</atlassian-plugin>